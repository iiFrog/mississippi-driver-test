<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mississippi Driver's Permit Test (2025)</title>
    <style>
        /* CSS Variables for Theme Support */
        :root {
            --background-color: #f5f5f5;
            --text-color: #333;
            --container-bg: white;
            --question-bg: #f9f9f9;
            --question-border: #3498db;
            --option-bg: #f0f0f0;
            --option-hover: #e0e0e0;
            --button-bg: #3498db;
            --button-hover: #2980b9;
            --results-bg: #f0f8ff;
            --heading-color: #2c3e50;
            --correct-color: #27ae60;
            --incorrect-color: #e74c3c;
            --study-guide-btn: #2ecc71;
            --study-guide-hover: #27ae60;
            --reset-btn: #7f8c8d;
            --reset-hover: #95a5a6;
            --box-shadow: rgba(0, 0, 0, 0.1);
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --background-color: #121212;
            --text-color: #e0e0e0;
            --container-bg: #1e1e1e;
            --question-bg: #2a2a2a;
            --question-border: #3498db;
            --option-bg: #333333;
            --option-hover: #444444;
            --button-bg: #2980b9;
            --button-hover: #3498db;
            --results-bg: #1a2733;
            --heading-color: #82b1ff;
            --correct-color: #00e676;
            --incorrect-color: #ff5252;
            --study-guide-btn: #2ecc71;
            --study-guide-hover: #27ae60;
            --reset-btn: #607d8b;
            --reset-hover: #78909c;
            --box-shadow: rgba(0, 0, 0, 0.3);
        }

        /* Global Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        h1 {
            text-align: center;
            color: var(--heading-color);
            margin-bottom: 30px;
        }

        .quiz-container {
            background-color: var(--container-bg);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 8px var(--box-shadow);
            transition: background-color 0.3s, box-shadow 0.3s;
            position: relative;
        }

        .question {
            background-color: var(--question-bg);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border-left: 4px solid var(--question-border);
            transition: background-color 0.3s;
        }

        .options {
            margin-left: 20px;
        }

        label {
            display: block;
            margin: 8px 0;
            padding: 10px;
            background-color: var(--option-bg);
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        label:hover {
            background-color: var(--option-hover);
        }

        input[type="radio"] {
            margin-right: 10px;
            cursor: pointer;
        }

        button {
            background-color: var(--button-bg);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--button-hover);
        }

        .results {
            display: none;
            background-color: var(--results-bg);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            transition: background-color 0.3s;
        }

        .results h2 {
            color: var(--heading-color);
            margin-bottom: 15px;
        }

        .result-count {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .review-container {
            margin-top: 20px;
            text-align: left;
        }

        .review-question {
            background-color: var(--question-bg);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .correct {
            border-left: 4px solid var(--correct-color);
        }

        .incorrect {
            border-left: 4px solid var(--incorrect-color);
        }

        .correct-answer {
            color: var(--correct-color);
            font-weight: bold;
        }

        .wrong-answer {
            color: var(--incorrect-color);
            text-decoration: line-through;
        }

        .reset-btn {
            background-color: var(--reset-btn);
        }

        .reset-btn:hover {
            background-color: var(--reset-hover);
        }

        .study-guide-btn {
            background-color: var(--study-guide-btn);
        }

        .study-guide-btn:hover {
            background-color: var(--study-guide-hover);
        }

        .study-guide {
            display: none;
            background-color: var(--question-bg);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            transition: background-color 0.3s;
        }

        .study-guide h2 {
            color: var(--heading-color);
            margin-bottom: 15px;
        }
        
        .study-section {
            margin-bottom: 20px;
        }
        
        .study-section h3 {
            color: var(--question-border);
            border-bottom: 1px solid var(--option-bg);
            padding-bottom: 5px;
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            background-color: var(--option-bg);
            border-radius: 30px;
            transition: background-color 0.3s;
            z-index: 10;
        }

        .theme-toggle:hover {
            background-color: var(--option-hover);
        }

        .theme-toggle-track {
            width: 40px;
            height: 20px;
            background-color: #aaa;
            border-radius: 10px;
            position: relative;
            margin-left: 8px;
            transition: background-color 0.3s;
        }

        .theme-toggle-thumb {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: white;
            transition: transform 0.3s, background-color 0.3s;
        }

        .dark-mode .theme-toggle-track {
            background-color: #3498db;
        }

        .dark-mode .theme-toggle-thumb {
            transform: translateX(20px);
            background-color: #1e1e1e;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .quiz-container {
                padding: 15px;
            }
            
            label {
                padding: 8px;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Mississippi Driver's Permit Test (2025)</h1>
    
    <div class="quiz-container">
        <div class="theme-toggle" id="theme-toggle">
            <span>Dark Mode</span>
            <div class="theme-toggle-track">
                <div class="theme-toggle-thumb"></div>
            </div>
        </div>

        <form id="quiz-form">
            <!-- Questions will be inserted here by JavaScript -->
        </form>
        
        <button id="submit-btn" type="button">Submit Test</button>
        
        <div id="results" class="results">
            <h2>Test Results</h2>
            <div id="score" class="result-count"></div>
            <div id="review" class="review-container"></div>
            <button id="reset-btn" class="reset-btn" type="button">Retake Test</button>
            <button id="study-guide-btn" class="study-guide-btn" type="button">View Study Guide</button>
        </div>

        <div id="study-guide" class="study-guide">
            <h2>Study Guide</h2>
            <!-- Study guide content will be inserted here by JavaScript -->
        </div>
    </div>

    <script>
        // Test questions data
        const questions = [
            {
                question: "What is the minimum age to apply for a Regular Learner's Permit in Mississippi?",
                options: [
                    "14 years old",
                    "15 years old",
                    "16 years old",
                    "17 years old"
                ],
                answer: "B"
            },
            {
                question: "Which document is NOT required when applying for a driver's license in Mississippi?",
                options: [
                    "Social Security card",
                    "Certified birth certificate",
                    "Proof of residency",
                    "High school diploma"
                ],
                answer: "D"
            },
            {
                question: "When driving with a Regular Learner's Permit, you must be accompanied by:",
                options: [
                    "A licensed driver aged 18 or older",
                    "A licensed driver aged 21 or older",
                    "A parent or legal guardian",
                    "Any licensed driver"
                ],
                answer: "B"
            },
            {
                question: "What does a red octagonal sign indicate?",
                options: [
                    "Yield",
                    "Stop",
                    "No entry",
                    "Railroad crossing"
                ],
                answer: "B"
            },
            {
                question: "What does a yellow diamond-shaped sign warn of?",
                options: [
                    "A stop sign ahead",
                    "A yield sign ahead",
                    "A hazard or special condition ahead",
                    "A railroad crossing ahead"
                ],
                answer: "C"
            },
            {
                question: "What does a broken yellow line on the road indicate?",
                options: [
                    "Passing is allowed with caution",
                    "Passing is prohibited",
                    "The lane is for left turns only",
                    "The road is about to end"
                ],
                answer: "A"
            },
            {
                question: "What does a solid white line on the road mean?",
                options: [
                    "Traffic is moving in opposite directions",
                    "Passing is allowed",
                    "Lane changing is discouraged",
                    "The road is one-way"
                ],
                answer: "C"
            },
            {
                question: "What is the speed limit in a school zone when children are present, unless otherwise posted?",
                options: [
                    "15 mph",
                    "20 mph",
                    "25 mph",
                    "30 mph"
                ],
                answer: "A"
            },
            {
                question: "When must you use your headlights?",
                options: [
                    "Only at night",
                    "When visibility is less than 500 feet",
                    "When driving in rain or fog",
                    "All of the above"
                ],
                answer: "D"
            },
            {
                question: "In Mississippi, seat belts are required for:",
                options: [
                    "The driver only",
                    "The driver and front-seat passengers",
                    "All passengers",
                    "Only passengers under 18"
                ],
                answer: "B"
            },
            {
                question: "What is the penalty for a first-offense DUI for a driver 21 or older in Mississippi?",
                options: [
                    "$100 fine and 24 hours in jail",
                    "$250-$1,000 fine and up to 48 hours in jail",
                    "$500 fine and 5 days in jail",
                    "$1,000 fine and 1 year license suspension"
                ],
                answer: "B"
            },
            {
                question: "What should you do if you witness an accident?",
                options: [
                    "Keep driving to avoid traffic congestion",
                    "Stop and offer assistance if it's safe",
                    "Call 911 and then leave",
                    "Take pictures for insurance purposes"
                ],
                answer: "B"
            },
            {
                question: "When passing a bicycle, you must leave a safe distance of at least:",
                options: [
                    "1 foot",
                    "2 feet",
                    "3 feet",
                    "4 feet"
                ],
                answer: "C"
            },
            {
                question: "How should you merge onto an interstate highway?",
                options: [
                    "Stop at the end of the ramp and wait for a gap",
                    "Speed up to match traffic speed and merge smoothly",
                    "Use your hazard lights to alert other drivers",
                    "Honk your horn to signal your intention"
                ],
                answer: "B"
            },
            {
                question: "What does a green arrow traffic signal indicate?",
                options: [
                    "You may proceed in the direction of the arrow",
                    "You must stop and then proceed",
                    "Pedestrians may cross",
                    "The light is about to change"
                ],
                answer: "A"
            },
            {
                question: "When an emergency vehicle with lights and siren approaches, you should:",
                options: [
                    "Speed up to get out of the way",
                    "Pull over to the right and stop",
                    "Continue driving and let them pass",
                    "Honk to acknowledge their presence"
                ],
                answer: "B"
            },
            {
                question: "When driving through a roundabout, you should:",
                options: [
                    "Yield to traffic already in the roundabout",
                    "Stop before entering",
                    "Speed up to merge quickly",
                    "Honk to alert other drivers"
                ],
                answer: "A"
            },
            {
                question: "What should you do if your vehicle starts to skid?",
                options: [
                    "Slam on the brakes",
                    "Steer in the direction you want to go",
                    "Accelerate quickly",
                    "Turn the steering wheel sharply"
                ],
                answer: "B"
            },
            {
                question: "What does a flashing yellow light mean?",
                options: [
                    "Stop and wait",
                    "Proceed with caution",
                    "Yield to oncoming traffic",
                    "No turn allowed"
                ],
                answer: "B"
            },
            {
                question: "What is the rule for turning right on red?",
                options: [
                    "It's never allowed",
                    "Stop first, then turn if safe",
                    "Turn without stopping",
                    "Yield to pedestrians only"
                ],
                answer: "B"
            },
            {
                question: "How should you park on a hill if facing downhill?",
                options: [
                    "Wheels straight",
                    "Wheels turned away from the curb",
                    "Wheels turned toward the curb",
                    "Wheels turned to the left"
                ],
                answer: "C"
            },
            {
                question: "What should you do if your vehicle begins to hydroplane?",
                options: [
                    "Accelerate to regain control",
                    "Brake hard to stop",
                    "Ease off the accelerator and steer straight",
                    "Turn the wheel sharply"
                ],
                answer: "C"
            },
            {
                question: "What must you do at a railroad crossing with no signals if driving a truck with flammable loads?",
                options: [
                    "Proceed with caution",
                    "Stop and check for trains",
                    "Speed up to clear the tracks",
                    "Honk to warn others"
                ],
                answer: "B"
            },
            {
                question: "What does a pentagon-shaped sign indicate?",
                options: [
                    "No passing zone",
                    "School zone or crossing",
                    "Railroad crossing",
                    "Yield ahead"
                ],
                answer: "B"
            },
            {
                question: "When sharing the road with large trucks, you should avoid:",
                options: [
                    "Passing on the right during a right turn",
                    "Staying in their blind spots",
                    "Following too closely",
                    "All of the above"
                ],
                answer: "D"
            },
            {
                question: "What should you do if your accelerator sticks?",
                options: [
                    "Turn off the ignition while driving",
                    "Shift to neutral and apply brakes",
                    "Accelerate to free it",
                    "Pull over without braking"
                ],
                answer: "B"
            },
            {
                question: "What does a blue sign with white lettering typically indicate?",
                options: [
                    "Regulatory information",
                    "Motorist services guidance",
                    "Warning of a hazard",
                    "Construction zone"
                ],
                answer: "B"
            },
            {
                question: "What is the maximum speed limit on the Natchez Trace Parkway unless otherwise posted?",
                options: [
                    "45 mph",
                    "50 mph",
                    "55 mph",
                    "60 mph"
                ],
                answer: "B"
            },
            {
                question: "What is the minimum liability insurance required for property damage in Mississippi?",
                options: [
                    "$15,000",
                    "$20,000",
                    "$25,000",
                    "$50,000"
                ],
                answer: "C"
            },
            {
                question: "What must you do if you refuse a breath test under the Implied Consent Law?",
                options: [
                    "Pay a $100 fine immediately",
                    "Surrender your license for 90 days",
                    "Take a written test instead",
                    "Nothing, it's your right to refuse"
                ],
                answer: "B"
            }
        ];

        // Study guide content
        const studyGuide = [
            {
                title: "License Requirements",
                content: `
                    <p><strong>Minimum Age:</strong> 15 for a Regular Learner's Permit; 16 with 1 year permit or 17 for Class R.</p>
                    <p><strong>Documents:</strong> Social Security card, certified birth certificate, two proofs of residency; high school diploma not required.</p>
                    <p><strong>Learner's Permit Rules:</strong> Must be with a licensed driver 21+.</p>
                    <p><strong>Sample Question:</strong> What is the minimum age for a learner's permit? (Answer: 15)</p>
                `
            },
            {
                title: "Traffic Signs and Signals",
                content: `
                    <p><strong>Shapes:</strong> Octagon = Stop; Diamond = Hazard; Pentagon = School.</p>
                    <p><strong>Colors:</strong> Red = Stop; Yellow = Warning; Blue = Services.</p>
                    <p><strong>Sample Question:</strong> What does a red octagonal sign mean? (Answer: Stop)</p>
                `
            },
            {
                title: "Pavement Markings",
                content: `
                    <p><strong>Yellow Lines:</strong> Broken = Pass with caution; Double solid = No passing.</p>
                    <p><strong>White Lines:</strong> Solid = Lane change discouraged; Double solid = No crossing.</p>
                    <p><strong>Sample Question:</strong> What does a broken yellow line indicate? (Answer: Passing allowed with caution)</p>
                `
            },
            {
                title: "Rules of the Road",
                content: `
                    <p><strong>Speed Limits:</strong> 15 mph in school zones; 70 mph on interstates; 50 mph on Natchez Trace.</p>
                    <p><strong>Right-of-Way:</strong> Yield to emergency vehicles; first vehicle at a four-way stop.</p>
                    <p><strong>Headlights:</strong> Use when visibility < 500 ft or in adverse weather.</p>
                    <p><strong>Sample Question:</strong> When must you use headlights? (Answer: All of the above)</p>
                `
            },
            {
                title: "Safe Driving Practices",
                content: `
                    <p><strong>Seat Belts:</strong> Required for driver and front-seat passengers.</p>
                    <p><strong>Bicycles:</strong> 3 ft passing distance.</p>
                    <p><strong>Emergency Vehicles:</strong> Pull over to the right and stop.</p>
                    <p><strong>Sample Question:</strong> What distance must you leave when passing a bicycle? (Answer: 3 ft)</p>
                `
            },
            {
                title: "Emergencies and Hazards",
                content: `
                    <p><strong>Skidding:</strong> Steer in the direction you want to go.</p>
                    <p><strong>Hydroplaning:</strong> Ease off accelerator, steer straight.</p>
                    <p><strong>Accelerator Sticks:</strong> Shift to neutral, brake.</p>
                    <p><strong>Sample Question:</strong> What to do if your vehicle hydroplanes? (Answer: Ease off accelerator and steer straight)</p>
                `
            },
            {
                title: "DUI and Implied Consent",
                content: `
                    <p><strong>First Offense (21+):</strong> $250-$1,000 fine, up to 48 hours jail, 120-day suspension.</p>
                    <p><strong>Refusal:</strong> 90-day suspension.</p>
                    <p><strong>Sample Question:</strong> Penalty for first DUI? (Answer: $250-$1,000 fine, up to 48 hours jail)</p>
                `
            },
            {
                title: "Vehicle Requirements",
                content: `
                    <p><strong>Insurance:</strong> $25,000 property damage minimum.</p>
                    <p><strong>Equipment:</strong> Headlights visible 500 ft, working brakes.</p>
                    <p><strong>Sample Question:</strong> Minimum property damage insurance? (Answer: $25,000)</p>
                `
            },
            {
                title: "Interstate and Special Situations",
                content: `
                    <p><strong>Merging:</strong> Match traffic speed.</p>
                    <p><strong>Large Trucks:</strong> Avoid blind spots, passing on right during turns.</p>
                    <p><strong>Sample Question:</strong> How to merge onto an interstate? (Answer: Speed up to match traffic)</p>
                `
            },
            {
                title: "How to Study",
                content: `
                    <p><strong>Read the Manual:</strong> Focus on sections listed in the Contents.</p>
                    <p><strong>Test Yourself:</strong> Use the 30-question permit test.</p>
                    <p><strong>Review Key Points:</strong> Use the study guide to memorize facts and rules.</p>
                    <p><strong>Practice Scenarios:</strong> Imagine driving situations and apply the rules.</p>
                `
            }
        ];

        // Function to convert letter answer to index (A=0, B=1, etc.)
        function answerToIndex(answer) {
            return answer.charCodeAt(0) - 65;
        }

        // Function to convert index to letter answer (0=A, 1=B, etc.)
        function indexToAnswer(index) {
            return String.fromCharCode(65 + index);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Generate question HTML with shuffled questions
        function generateQuestions() {
            const quizForm = document.getElementById("quiz-form");
            quizForm.innerHTML = ""; // Clear form if regenerating
            
            // Create a shuffled copy of the questions array
            const shuffledQuestions = shuffleArray([...questions]);
            
            // Store the order of questions for scoring
            window.questionOrder = shuffledQuestions.map(q => questions.findIndex(originalQ => originalQ.question === q.question));
            
            shuffledQuestions.forEach((q, index) => {
                const questionDiv = document.createElement("div");
                questionDiv.classList.add("question");
                
                questionDiv.innerHTML = `
                    <h3>Question ${index + 1}</h3>
                    <p>${q.question}</p>
                    <div class="options">
                        ${q.options.map((option, i) => `
                            <label>
                                <input type="radio" name="q${index}" value="${indexToAnswer(i)}">
                                ${indexToAnswer(i)}. ${option}
                            </label>
                        `).join('')}
                    </div>
                `;
                
                quizForm.appendChild(questionDiv);
            });
        }

        // Generate study guide HTML
        function generateStudyGuide() {
            const studyGuideDiv = document.getElementById("study-guide");
            studyGuideDiv.innerHTML = ""; // Clear if regenerating
            
            studyGuide.forEach(section => {
                const sectionDiv = document.createElement("div");
                sectionDiv.classList.add("study-section");
                
                sectionDiv.innerHTML = `
                    <h3>${section.title}</h3>
                    ${section.content}
                `;
                
                studyGuideDiv.appendChild(sectionDiv);
            });
        }

        // Calculate results
        function calculateResults() {
            const results = [];
            let score = 0;
            
            window.questionOrder.forEach((originalIndex, shuffledIndex) => {
                const selectedOption = document.querySelector(`input[name="q${shuffledIndex}"]:checked`);
                const userAnswer = selectedOption ? selectedOption.value : null;
                const correctAnswer = questions[originalIndex].answer;
                const isCorrect = userAnswer === correctAnswer;
                
                if (isCorrect) {
                    score++;
                }
                
                results.push({
                    question: questions[originalIndex].question,
                    userAnswer,
                    correctAnswer,
                    isCorrect,
                    options: questions[originalIndex].options
                });
            });
            
            return {
                score,
                total: questions.length,
                results
            };
        }

        // Display results
        function displayResults(resultsData) {
            const resultsDiv = document.getElementById("results");
            const scoreDiv = document.getElementById("score");
            const reviewDiv = document.getElementById("review");
            
            scoreDiv.textContent = `You scored ${resultsData.score} out of ${resultsData.total} (${Math.round((resultsData.score / resultsData.total) * 100)}%)`;
            
            reviewDiv.innerHTML = "";
            
            resultsData.results.forEach((result, index) => {
                const reviewQuestionDiv = document.createElement("div");
                reviewQuestionDiv.classList.add("review-question");
                reviewQuestionDiv.classList.add(result.isCorrect ? "correct" : "incorrect");
                
                const questionText = `<p><strong>Question ${index + 1}:</strong> ${result.question}</p>`;
                
                let answerText = "";
                
                if (result.userAnswer) {
                    const userAnswerIndex = answerToIndex(result.userAnswer);
                    const correctAnswerIndex = answerToIndex(result.correctAnswer);
                    
                    if (result.isCorrect) {
                        answerText = `<p>Your answer: <span class="correct-answer">${result.userAnswer}. ${result.options[userAnswerIndex]}</span> ✓</p>`;
                    } else {
                        answerText = `
                            <p>Your answer: <span class="wrong-answer">${result.userAnswer}. ${result.options[userAnswerIndex]}</span> ✗</p>
                            <p>Correct answer: <span class="correct-answer">${result.correctAnswer}. ${result.options[correctAnswerIndex]}</span></p>
                        `;
                    }
                } else {
                    const correctAnswerIndex = answerToIndex(result.correctAnswer);
                    answerText = `
                        <p>You didn't answer this question.</p>
                        <p>Correct answer: <span class="correct-answer">${result.correctAnswer}. ${result.options[correctAnswerIndex]}</span></p>
                    `;
                }
                
                reviewQuestionDiv.innerHTML = questionText + answerText;
                reviewDiv.appendChild(reviewQuestionDiv);
            });
            
            resultsDiv.style.display = "block";
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: "smooth" });
        }

        // Reset quiz
        function resetQuiz() {
            document.getElementById("results").style.display = "none";
            document.getElementById("study-guide").style.display = "none";
            
            // Generate new shuffled questions
            generateQuestions();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: "smooth" });
        }

        // Toggle study guide
        function toggleStudyGuide() {
            const studyGuideDiv = document.getElementById("study-guide");
            if (studyGuideDiv.style.display === "block") {
                studyGuideDiv.style.display = "none";
            } else {
                studyGuideDiv.style.display = "block";
                studyGuideDiv.scrollIntoView({ behavior: "smooth" });
            }
        }

        // Toggle dark mode
        function toggleDarkMode() {
